# Overview
Exploitation consists of the tactics, techniques, and procedures that attackers/adversaries utilize to gain an initial foothold on a target system and consequently the target network.

# Topics
- [Vulnerability Scanning](#Vulnerability_Scanning)
- [Searching for Exploits](#Searching_for_Exploits)
- [Fixing Exploits](#Fixing_Exploits)
- [Bind & Reverse Shells](#Bind_and_Reverse_Shells)
- [Exploitation Frameworks](#Exploitation_Frameworks)
- [Windows Exploitation](#Windows_Exploitation)
- [Linux Exploitation](#Linux_Exploitation)
- [AV Evasion & Obfuscation](#AV_Evasion_and_Obfuscation)

# Vulnerability_Scanning
## Banner Grabbing
- Identify service and version
- Can use NMAP to banner grab or to run scripts to discover service information
	- [nmap](../../Tools/NMAP.md)
- netcat
	- `nc -v <IP> <port>` : grabs banner
- Try logging in with FTP or SSH
	- [FTP](../../Services/FTP.md)
	- [SSH](../../Services/SSH.md)
- Web server, try loading the webpage and walking through it.
	- Can view the page source etc...
	- [HTTP](../../Services/HTTP.md)
- Metasploit-Framework
	- [MSF](../../Tools/MSF.md)

---

# Searching_for_Exploits
- web search or google service and version
	- [Exploit-db](https://www.exploit-db.com) - External
	- [Rapid7](https://www.rapid7.com/db/) - External
	- [Google-Hakcing-DB](https://www.exploit-db.com/google-hacking-database) - External
- searchsploit
	- `searchsploit openssh 7.2` : search for exploits
	- `exploitdb` is the package on kali
	- `/usr/share/exploitdb` : storage location
	- -u : --update : update the database
	- -m : --mirror : copy to current directory
	- -x : --examine : opens in $PAGER to view
	- -c : case specific search ex "OpenSSH"
	- -t : search within title
	- -e : "Windows XP" exact matching
	- -w : show web url

---

# Fixing_Exploits
Download and read the code on exploits from exploit-db. You will need to know if variables such as local ip need to be changed along with needing to run netcat listener and hosting a web server for payloads.
## Compiling-Exploits
Cross-compiling is for compiling code for another platform or into a portable executable. Sometime the author will include instructions within the code for compilation options.
- gcc : GNU C compiler
- Mingw-w64 : open source windows portable executable
- VLC exploit example - Windows
	- `i686-w64-mingw32-gcc 9303.c -o exploit`
	- `i686-w64-mingw32-gcc 9303.c -o exploit -lws2_32` : 32bit
- DirtyCow example - Linux
	- `gcc -pthread dirty.c -o dirty -lcrypt` 

---

# Bind_and_Reverse_Shells
Use Netcat for setting up a bind or reverse shell connection between two hosts. Some other useful online resources.

[Netcat](../../Tools/Netcat.md)
[Payloads All The Things - Repo](https://github.com/swisskyrepo/PayloadsAllTheThings) - External
[RevShells](https://www.revshells.com/) - External
[Socat](https://linux.die.net/man/1/socat) - External

---

# Exploitation_Frameworks
- [Metasploit-Framework](../../Tools/MSF.md)
- PowerShell-Empire (AKA Empire)
	- Pure PowerShell exploitation/post-exploitation framework
	- Ability to run PowerShell agents without powershell.exe
- Starkiller
	- GUI frontend for PowerShell Empire

1. Install *powershell-empire* and *starkiller*
	1. `sudo powershell-empire server` : starts up Empire API
	2. `sudo powershell-empire client` : starts up the CLI client
	3. login to http on the API port to access Starkiller GUI

---

# Windows_Exploitation
Black-Box test is where you are not given information on the host and you have to find out the details yourself. 

To figure out what is running use the following enumeration tools.
- [NMAP](../../Tools/NMAP.md)
- [MSF](../../Tools/MSF.md)
- [Netcat](../../Tools/Netcat.md)
Exploit services found.
- Check Services Folder

# Linux_Exploitation
To figure out what is running use the following enumeration tools. and then exploit the services.
- [NMAP](../../Tools/NMAP.md)
- [MSF](../../Tools/MSF.md)
- [Netcat](../../Tools/Netcat.md)
Exploit services found.
- Check Services Folder

---

# AV_Evasion_and_Obfuscation
Defense evasion consists of techniques that adversaries use to avoid detection throughout their compromise. Can uninstall/disable security software or obfuscate/encrypt data and scripts. 

## Detection Types
1. Signature based
	1. hashes used to compare files to malicious database
2. Heuristic-based
	1. patterns within code or program calls
3. Behavior-Based
	1. Identifying by monitoring its behavior.

Evasion Techniques
1. Encoding : changing data into new format using a scheme. 
	1. Can use encoding with [msfvenom](../../Tools/MSF.md#Encoding_Payloads) when generating payloads.
2. Packing : generate executable with new binary structure with smaller size.
3. Crypters : encrypting code or payloads and then decrypting on use/in memory

[Invoke-Obsfucation](https://github.com/danielbohannon/Invoke-Obfuscation) - External
Invoke-Obfuscation is a PowerShell v2.0+ compatible PowerShell command and script obfuscator.

## Shellter
Windows executable which will require wine. Included in the kali repos. 



